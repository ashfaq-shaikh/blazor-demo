#pragma checksum "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\Pages\FetchData.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "4a47447ff4d1e7662eb43d5058d81e510c0f32aa"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace BlazorApp_Demo_ZobiWebSolutions.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using BlazorApp_Demo_ZobiWebSolutions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using BlazorApp_Demo_ZobiWebSolutions.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Microsoft.AspNetCore.WebUtilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\_Imports.razor"
using Blazor.LoadingIndicator;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\Pages\FetchData.razor"
using Zobi.Domain.Entities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\Pages\FetchData.razor"
using BlazorApp_Demo_ZobiWebSolutions.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\Pages\FetchData.razor"
using Zobi.Domain.Models;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/")]
    [Microsoft.AspNetCore.Components.RouteAttribute("/projects")]
    public class FetchData : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 224 "E:\Working\Ashley Waterman\PAM Project - Blazor App Demo - Zobi Web Solutions\BlazorApp_Demo_ZobiWebSolutions\BlazorApp_Demo_ZobiWebSolutions\Pages\FetchData.razor"
       

    #region Declarations
    ProjectsModel[] projects;

    string[] fy = { "16/17", "17/18", "18/19" };
    string[] type = { "Cost Avoidance", "Cost Pressure", "Savings", "Trials" };
    string[] lead = { "Alex Dorsen", "Andrew Fowler", "Anne Tomkins", "Ashley Waterman", "Lee Johnson" };
    string[] month = { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
    string[] lever = { "Compare & Save", "Contract Review", "Rebate", "Tender" };
    string[] Brag = { "GREEN", "AMBER", "RED", "GREEN/AMBER" };
    string[] stage = { "Cancelled", "Implemented", "Passed Back", "Project Setup" };


    public List<string> LstFy { get; set; } = new List<string>();
    public List<string> LstType { get; set; } = new List<string>();
    public List<string> LstLead { get; set; } = new List<string>();
    public List<string> lstMonth { get; set; } = new List<string>();
    public List<string> LstLever { get; set; } = new List<string>();
    public List<string> LstBrag { get; set; } = new List<string>();
    public List<string> LstStage { get; set; } = new List<string>();

    #endregion

    #region Events
    protected override async Task OnInitializedAsync()
    {
        CallProjectService();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JSRuntime.InvokeAsync<object>("BindCheckBoxes");
    }

    /// <summary>
    ///Clear all filters on click event of button
    /// </summary>
    /// <returns></returns>
    async Task ClearAllFilter()
    {
        LstFy.Clear();
        LstType.Clear();
        LstLead.Clear();
        lstMonth.Clear();
        LstLever.Clear();
        LstBrag.Clear();
        LstStage.Clear();

        await Loading.StartTaskAsync(async (task) =>
        {
            CallProjectService();
            await Task.Delay(500);
        }, "fake-reload-table", "Loading ...", "Downloading table data");

        await JSRuntime.InvokeAsync<object>("ClearAllFilters");

    }

    async Task CheckboxesHideShow()
    {
        await JSRuntime.InvokeAsync<object>("CheckboxesHideShowButton");
    }

    /// <summary>
    ///Filter checkbox click event. This method will filter all projects data.
    /// </summary>
    /// <param name="filterId">Filter text</param>
    /// <param name="checkedValue">Pass checkbox</param>
    /// /// <param name="checkboxOf">pass the enum value of CheckboxOf enum</param>
    /// <returns></returns>
    async Task CheckboxClicked(string filterId, object checkedValue, CheckboxOf checkboxOf)
    {
        switch (checkboxOf)
        {
            case CheckboxOf.FY: AddItemToList<string>((bool)checkedValue, LstFy, filterId); break;
            case CheckboxOf.Type: AddItemToList<string>((bool)checkedValue, LstType, filterId); break;
            case CheckboxOf.Lead: AddItemToList<string>((bool)checkedValue, LstLead, filterId); break;
            case CheckboxOf.Month: AddItemToList<string>((bool)checkedValue, lstMonth, filterId); break;
            case CheckboxOf.Lever: AddItemToList<string>((bool)checkedValue, LstLever, filterId); break;
            case CheckboxOf.BRAG: AddItemToList<string>((bool)checkedValue, LstBrag, filterId); break;
            case CheckboxOf.Stage: AddItemToList<string>((bool)checkedValue, LstStage, filterId); break;
        }

        await Loading.StartTaskAsync(async (task) =>
        {
            CallProjectService();
            await Task.Delay(500);
        }, "fake-reload-table", "Loading ...", "Downloading table data");

    }


    #endregion

    #region Methods

    /// <summary>
    /// This method will call project service and bind data to projects array variable.
    /// </summary>
    /// <returns></returns>
    async Task CallProjectService()
    {
        string fyCsv = String.Join(",", LstFy);
        string typeCsv = String.Join(",", LstType);
        string leadCsv = String.Join(",", LstLead);
        string monthCsv = String.Join(",", lstMonth);
        string leverCsv = String.Join(",", LstLever);
        string BragCsv = String.Join(",", LstBrag);
        string stageCsv = String.Join(",", LstStage);


        projects = await ProjectDataService.GetProjectListAsync(fyCsv, typeCsv, leadCsv, monthCsv, leverCsv, BragCsv, stageCsv);

        await JSRuntime.InvokeAsync<object>("DestroyFetchProjectData");
        await JSRuntime.InvokeAsync<object>("FetchProjectData");
    }
    public event Action OnChange;

    private void NotifyStateChanged() => OnChange?.Invoke();


    /// <summary>
    /// Add filter text to perticular list of filter.
    /// </summary>
    /// <typeparam name="T">List of filter model</typeparam>
    /// <param name="checkedValue">boolean</param>
    /// <param name="obj">List of filter model</param>
    /// <param name="value">Value of checkbox</param>
    void AddItemToList<T>(bool checkedValue, List<T> obj, T value)
    {
        if ((bool)checkedValue)
        {
            if (!obj.Contains(value))
            {
                obj.Add(value);
            }
        }
        else
        {
            if (obj.Contains(value))
            {
                obj.Remove(value);
            }
        }
    }
    #endregion


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ProjectDataService ProjectDataService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Blazored.LocalStorage.ILocalStorageService localStorage { get; set; }
    }
}
#pragma warning restore 1591
